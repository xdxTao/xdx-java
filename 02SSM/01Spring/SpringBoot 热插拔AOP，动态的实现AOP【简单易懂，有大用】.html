<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.50" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://vuepress-theme-hope-docs-demo.netlify.app/02SSM/01Spring/SpringBoot%20%E7%83%AD%E6%8F%92%E6%8B%94AOP%EF%BC%8C%E5%8A%A8%E6%80%81%E7%9A%84%E5%AE%9E%E7%8E%B0AOP%E3%80%90%E7%AE%80%E5%8D%95%E6%98%93%E6%87%82%EF%BC%8C%E6%9C%89%E5%A4%A7%E7%94%A8%E3%80%91.html"><meta property="og:site_name" content="å°é“ä»™Javaç¬”è®°"><meta property="og:title" content="ã€ä¸­ã€‘SpringBoot çƒ­æ’æ‹”AOPï¼ŒåŠ¨æ€çš„å®ç°AOPã€ç®€å•æ˜“æ‡‚ï¼Œæœ‰å¤§ç”¨ã€‘"><meta property="og:description" content="Bç«™å­¦ä¹ åœ°å€ å‰æ®µæ—¶é—´åœ¨å­¦ä¹ sentinelå’Œdubboçš„æ—¶å€™ï¼Œå¾ˆå¥½å¥‡å®ƒä»¬å¯¹åº”çš„æ§åˆ¶å°ä¸ºä½•å¯ä»¥å®ç°ä»£ç æ— ä¾µå…¥ åŠ¨æ€çš„æ·»åŠ /åˆ é™¤åŠŸèƒ½ çœ‹è¿‡ @Asyncã€@Transactionnalç›¸å…³æºç çš„æœ‹å‹åº”è¯¥çŸ¥é“ï¼Œè¿™æ˜¯åŸºäºåŠ¨æ€ä»£ç†å»å®ç°äº†ï¼Œæ—¢ç„¶å¦‚æ­¤é‚£æˆ‘ä»¬æ˜¯å¦å¯ä»¥å®ç°åŠ¨æ€çš„å»æ·»åŠ /åˆ é™¤åŠ¨æ€ä»£ç†å‘¢ ç­”æ¡ˆæ˜¯ YESï¼Œä¸‹é¢å°±æ¥å®ç°ä¸€ä¸ªåŠ¨æ€çš„æ·»åŠ /åˆ é™¤åŠ¨æ€ä»£ç†çš„åŠŸèƒ½ï¼Œå®ƒ..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-07-20T12:30:55.000Z"><meta property="article:author" content="å°é“ä»™97"><meta property="article:tag" content="AOP"><meta property="article:tag" content="åŠ¨æ€ä»£ç†"><meta property="article:tag" content="çƒ­æ’æ‹”AOP"><meta property="article:published_time" content="2024-05-25T17:23:37.000Z"><meta property="article:modified_time" content="2024-07-20T12:30:55.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"ã€ä¸­ã€‘SpringBoot çƒ­æ’æ‹”AOPï¼ŒåŠ¨æ€çš„å®ç°AOPã€ç®€å•æ˜“æ‡‚ï¼Œæœ‰å¤§ç”¨ã€‘","image":[""],"datePublished":"2024-05-25T17:23:37.000Z","dateModified":"2024-07-20T12:30:55.000Z","author":[{"@type":"Person","name":"å°é“ä»™97","url":"https://java.xdx97.com"}]}</script><title>ã€ä¸­ã€‘SpringBoot çƒ­æ’æ‹”AOPï¼ŒåŠ¨æ€çš„å®ç°AOPã€ç®€å•æ˜“æ‡‚ï¼Œæœ‰å¤§ç”¨ã€‘ | å°é“ä»™Javaç¬”è®°</title><meta name="description" content="Bç«™å­¦ä¹ åœ°å€ å‰æ®µæ—¶é—´åœ¨å­¦ä¹ sentinelå’Œdubboçš„æ—¶å€™ï¼Œå¾ˆå¥½å¥‡å®ƒä»¬å¯¹åº”çš„æ§åˆ¶å°ä¸ºä½•å¯ä»¥å®ç°ä»£ç æ— ä¾µå…¥ åŠ¨æ€çš„æ·»åŠ /åˆ é™¤åŠŸèƒ½ çœ‹è¿‡ @Asyncã€@Transactionnalç›¸å…³æºç çš„æœ‹å‹åº”è¯¥çŸ¥é“ï¼Œè¿™æ˜¯åŸºäºåŠ¨æ€ä»£ç†å»å®ç°äº†ï¼Œæ—¢ç„¶å¦‚æ­¤é‚£æˆ‘ä»¬æ˜¯å¦å¯ä»¥å®ç°åŠ¨æ€çš„å»æ·»åŠ /åˆ é™¤åŠ¨æ€ä»£ç†å‘¢ ç­”æ¡ˆæ˜¯ YESï¼Œä¸‹é¢å°±æ¥å®ç°ä¸€ä¸ªåŠ¨æ€çš„æ·»åŠ /åˆ é™¤åŠ¨æ€ä»£ç†çš„åŠŸèƒ½ï¼Œå®ƒ...">
    <link rel="preload" href="/assets/style-ifFij3jd.css" as="style"><link rel="stylesheet" href="/assets/style-ifFij3jd.css">
    <link rel="modulepreload" href="/assets/app-mDJKuaTn.js"><link rel="modulepreload" href="/assets/SpringBoot çƒ­æ’æ‹”AOPï¼ŒåŠ¨æ€çš„å®ç°AOPã€ç®€å•æ˜“æ‡‚ï¼Œæœ‰å¤§ç”¨ã€‘.html-BGccJAAB.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html--vGO09nR.js" as="script"><link rel="prefetch" href="/assets/portfolio.html-mXoM3MTR.js" as="script"><link rel="prefetch" href="/assets/Javaé”ä¹‹ReentrantLockï¼ˆæºç è¯¦è§£ï¼‰.html-B_qvTWBy.js" as="script"><link rel="prefetch" href="/assets/æˆ‘å¯¹å¾®æœåŠ¡çš„ç†è§£.html-CCOIzls7.js" as="script"><link rel="prefetch" href="/assets/è°ˆè°ˆæˆ‘ç†è§£çš„SpringCloudå’ŒKubernetesçš„åŒºåˆ«.html-DeLB4KqV.js" as="script"><link rel="prefetch" href="/assets/Linuxå®‰è£…RocketMQã€é˜¿é‡Œäº‘ESCï¼ŒCentOS7__è¸©å‘æ— æ•°ã€‘.html-W_U_xB-m.js" as="script"><link rel="prefetch" href="/assets/RocketMQ æ¶ˆè´¹è€…æºç è§£è¯»ï¼šæ¶ˆè´¹è¿‡ç¨‹ã€è´Ÿè½½åŸç†ã€é¡ºåºæ¶ˆè´¹åŸç†.html-DtSfb_lr.js" as="script"><link rel="prefetch" href="/assets/RocketMQ æ¶ˆè´¹è€…è¿è¡ŒåŸç†ï¼ŒConsumer é›†ç¾¤æ¶ˆè´¹ã€å¹¿æ’­æ¶ˆè´¹.html-CKFtgDep.js" as="script"><link rel="prefetch" href="/assets/RocketMQã€Kafkaã€RabbitMQ æ¶ˆè´¹åŸç†ï¼Œé¡ºåºæ¶ˆè´¹é—®é¢˜ã€å›¾æ–‡ç†è§£ã€‘.html-jsXCQMbz.js" as="script"><link rel="prefetch" href="/assets/RocketMQä¹‹ Consumerï¼Œæ¶ˆè´¹è€…æ¶ˆè´¹åŸç†è§£æ.html-AP4Mc1Hj.js" as="script"><link rel="prefetch" href="/assets/index.html-CoquA5mA.js" as="script"><link rel="prefetch" href="/assets/å·¥å‚æ¨¡å¼ã€åˆ›å»ºå‹æ¨¡å¼ã€‘.html-CxNKekwW.js" as="script"><link rel="prefetch" href="/assets/æ³•åˆ™.html-C9J1V7D-.js" as="script"><link rel="prefetch" href="/assets/å…«å¤§æ’åºå›¾è§£ç®—æ³•.html-CP_hjqAJ.js" as="script"><link rel="prefetch" href="/assets/JVMå†…å­˜åŒºåŸŸè¯¦è§£ï¼Œä¸€æ–‡å¼„æ‡‚JVMå†…å­˜ã€å†…å­˜åˆ†å¸ƒã€å›æ”¶ç®—æ³•ã€åƒåœ¾å›æ”¶å™¨ã€‘.html-Dkp-S320.js" as="script"><link rel="prefetch" href="/assets/JVMå†…å­˜è°ƒä¼˜å¸¸ç”¨å‚æ•°.html-CSzn_k2N.js" as="script"><link rel="prefetch" href="/assets/Javaè¿›é˜¶ä¹‹Dumpæ–‡ä»¶åˆä½“éªŒ.html-OSaATBzH.js" as="script"><link rel="prefetch" href="/assets/javaçº¿ä¸Šé—®é¢˜æ’æŸ¥å·¥å…·â€”â€”Arthas.html-CBEPM8sR.js" as="script"><link rel="prefetch" href="/assets/index.html-Dlh-lNp0.js" as="script"><link rel="prefetch" href="/assets/åœ°å€è§£æå’Œé€†åœ°å€è§£æã€å†™ä¸ªæ¼‚äº®çš„ä»£ç ä¸€ã€‘.html-AHvOzy3G.js" as="script"><link rel="prefetch" href="/assets/Nominatimå…è´¹çš„åœ°å€è§£æï¼Œé€†åœ°å€è§£æï¼ŒOpenStreetMapå¼€æºåœ°å›¾æ•°æ®ã€å…¨ç½‘æœ€å…¨ã€‘.html-Df2te2ER.js" as="script"><link rel="prefetch" href="/assets/SpringSecurityæœ€æ–°å­¦ä¹ ï¼Œspring-security-oauth2-authorization-serverã€spring-security-oauth2å‡çº§ã€‘.html-J0xtuLnb.js" as="script"><link rel="prefetch" href="/assets/å…è´¹å¼€æºçš„åœ°å›¾è§£æå·¥å…·ã€å¿«é€Ÿä¸Šæ‰‹ã€‘.html-CtyYC0In.js" as="script"><link rel="prefetch" href="/assets/æ¨¡æ¿.html-SOZl1KNu.js" as="script"><link rel="prefetch" href="/assets/Javaçº¿ç¨‹æ± è¿è¡ŒåŸç†ï¼Œçº¿ç¨‹æ± æºç è§£è¯»ã€Javaçº¿ç¨‹æ± å­¦ä¹ äºŒã€‘.html-CL50BTJF.js" as="script"><link rel="prefetch" href="/assets/index.html-BuHyWWHK.js" as="script"><link rel="prefetch" href="/assets/çº¿ç¨‹æ± æœ€ä¼˜ä½¿ç”¨ç­–ç•¥ã€Javaçº¿ç¨‹æ± å­¦ä¹ ä¸€ã€‘.html-DGZQ4idh.js" as="script"><link rel="prefetch" href="/assets/ArrayListæ‰©å®¹æœºåˆ¶æºç åˆ†æ.html-ZRkMc0te.js" as="script"><link rel="prefetch" href="/assets/HashMapæ‰©å®¹æœºåˆ¶æºç åˆ†æ.html-CjGm6or_.js" as="script"><link rel="prefetch" href="/assets/index.html-WY77uvOq.js" as="script"><link rel="prefetch" href="/assets/Javaå…¨å±€å¼‚å¸¸å¤„ç†ï¼Œ@ControllerAdviceå¼‚å¸¸æ‹¦æˆªåŸç†è§£æã€ç®€å•æ˜“æ‡‚ã€‘.html-XVu5GPkI.js" as="script"><link rel="prefetch" href="/assets/index.html-DBNtACjh.js" as="script"><link rel="prefetch" href="/assets/Springäº‹åŠ¡æºç è§£æã€ä¸€æ¬¡ä¸€ç¯‡æ–‡ç« å¼„æ‡‚ã€‘.html-MqRbCxfF.js" as="script"><link rel="prefetch" href="/assets/Springä½¿ç”¨@Transactional ç®¡ç†äº‹åŠ¡ï¼ŒJavaäº‹åŠ¡è¯¦è§£.html-Bsz09EaE.js" as="script"><link rel="prefetch" href="/assets/ä¸€æ–‡å¼„æ‡‚@Asyncä»£ç†æ‰§è¡ŒåŸç†ï¼ˆä»æºç çš„è§’åº¦æ·±å…¥ç†è§£@EnableAsync æ³¨è§£å¼€å¯åŸç†ï¼‰.html-CGH0jGwZ.js" as="script"><link rel="prefetch" href="/assets/Javaæ—¥å¿—æºç è¯¦è§£ï¼ŒSpringBootæ—¥å¿— slf4jã€logbackã€log4j.html-CJR007-Y.js" as="script"><link rel="prefetch" href="/assets/index.html-CDHdJaQh.js" as="script"><link rel="prefetch" href="/assets/HTTPæ‰§è¡Œæµç¨‹ï¼ŒSpringMVCæ‰§è¡Œæµç¨‹ï¼ŒJavaä¸€æ¬¡HTTPè¯·æ±‚å®¹å™¨åšäº†å“ªäº›äº‹æƒ…ï¼Œè¿‡æ»¤å™¨ã€æ‹¦æˆªå™¨ã€AOPæ‰§è¡Œæµç¨‹ã€è¶…è¯¦ç»†è§£ç­”ã€‘.html-L22LxmoS.js" as="script"><link rel="prefetch" href="/assets/index.html-BRhJM-BH.js" as="script"><link rel="prefetch" href="/assets/MyBatis æ‰§è¡ŒåŸç†ï¼Œæºç è§£è¯»ï¼ŒåŸºäºSpringBootè®²è§£.html-CyWFyvw5.js" as="script"><link rel="prefetch" href="/assets/index.html-BNUniWLm.js" as="script"><link rel="prefetch" href="/assets/åŸºäºMyBatisäºŒçº§ç¼“å­˜æ·±å…¥è£…é¥°å™¨æ¨¡å¼.html-CR4nlV_e.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥ç†è§£MyBatisä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ã€è¶…è¯¦ç»†æºç è§£æã€‘.html-BoFvxnvu.js" as="script"><link rel="prefetch" href="/assets/index.html-DNzGuLr1.js" as="script"><link rel="prefetch" href="/assets/Rediså¸¸ç”¨å‘½ä»¤.html-B1jU6K4U.js" as="script"><link rel="prefetch" href="/assets/Redisé›†ç¾¤ä¹‹ä¸»ä»ã€å“¨å…µã€åˆ†ç‰‡é›†ç¾¤ï¼ŒSpringBootæ•´åˆRedisé›†ç¾¤.html-DOrdyQHQ.js" as="script"><link rel="prefetch" href="/assets/å¸ƒéš†è¿‡æ»¤å™¨ï¼ŒRedisä¹‹ bitmapï¼Œåœºæ™¯é¢˜ã€å¦‚æœå¾®åšæŸä¸ªå¤§Vå‘äº†ä¸€æ¡æ¶ˆæ¯ï¼Œæ€ä¹ˆç»Ÿè®¡æœ‰å¤šå°‘äººçœ‹è¿‡äº†ã€‘.html-B9YCnfxM.js" as="script"><link rel="prefetch" href="/assets/Deadlock found when trying to get lockï¼› try restarting transaction ã€MySQLæ­»é”é—®é¢˜è§£å†³ã€‘.html-CXPFgmKY.js" as="script"><link rel="prefetch" href="/assets/MySQLæ‰§è¡Œè¿‡ç¨‹ï¼ˆä¸€æ¡SQLä»Javaåˆ°æ•°æ®åº“éƒ½ç»å†äº†ä»€ä¹ˆï¼‰.html-e_gyFP5i.js" as="script"><link rel="prefetch" href="/assets/MySQLç´¢å¼•è¯¦è§£ã€B_Treeç´¢å¼•ã€å“ˆå¸Œç´¢å¼•ã€å…¨æ–‡ç´¢å¼•ã€è¦†ç›–ç´¢å¼•ã€‘.html-DH3DuXEF.js" as="script"><link rel="prefetch" href="/assets/MySQLï¼ŒMVCCè¯¦è§£ï¼Œå¿«ç…§è¯»åœ¨RCã€RRä¸‹çš„åŒºåˆ«.html-BcLGd3KL.js" as="script"><link rel="prefetch" href="/assets/index.html-Bw-EGYmv.js" as="script"><link rel="prefetch" href="/assets/ä¸€æ–‡å¼„æ‡‚MySQLé”æœºåˆ¶ã€è®°å½•é”ã€é—´éš™é”ã€ä¸´é”®é”ï¼Œå…±äº«é”ã€æ’ä»–é”ï¼Œæ„å‘é”ã€‘.html-Cyw0rP2r.js" as="script"><link rel="prefetch" href="/assets/ES 8.xå¼€å§‹ï¼ˆdocker-composeå®‰è£…ã€kibanaä½¿ç”¨ã€javaæ“ä½œï¼‰.html-BBE0ecUl.js" as="script"><link rel="prefetch" href="/assets/index.html-wgNksZWA.js" as="script"><link rel="prefetch" href="/assets/index.html-DtQ5ymwH.js" as="script"><link rel="prefetch" href="/assets/Dubbo-Admin å®è·µï¼ŒDubbo3 é…ç½®å¤šåè®®ï¼ŒåŒæ—¶æä¾›Dubboå’ŒHTTPåè®®.html-NRA36Ek6.js" as="script"><link rel="prefetch" href="/assets/Dubboå…¥é—¨é¡¹ç›®æ­å»ºã€Dubbo3.2.9ã€Nacos2.3.0ã€SpringBoot 2.7.17ã€Dubbo-Admin 0.6.0ã€‘.html-C7JKaOWs.js" as="script"><link rel="prefetch" href="/assets/index.html-CPi0Ky7s.js" as="script"><link rel="prefetch" href="/assets/index.html-DRlOmM3-.js" as="script"><link rel="prefetch" href="/assets/docker-compose å®‰è£…Nacos.html-CNf7pgdD.js" as="script"><link rel="prefetch" href="/assets/index.html-DLPQ_R6g.js" as="script"><link rel="prefetch" href="/assets/Sentinel è§„åˆ™æŒä¹…åŒ–ï¼ŒåŸºäºRedisæŒä¹…åŒ–ã€é™„å¸¦æºç ã€‘.html-C6mnzD7J.js" as="script"><link rel="prefetch" href="/assets/Sentinelä»å…¥é—¨åˆ°â€œç²¾é€šâ€ï¼Œä»æºç å±‚é¢å­¦ä¹ Sentinel.html-BtdC9giB.js" as="script"><link rel="prefetch" href="/assets/index.html-m-H03t6F.js" as="script"><link rel="prefetch" href="/assets/SkyWalking å…¥é—¨.html-xRM3yO5b.js" as="script"><link rel="prefetch" href="/assets/K8Sã€kubernetes no resolver defined to resolve  could not be resolved (3_ Host not found) é—®é¢˜è§£å†³.html-B-GR0lFV.js" as="script"><link rel="prefetch" href="/assets/index.html-CBQm84xC.js" as="script"><link rel="prefetch" href="/assets/Gitå‘½ä»¤.html-Ln4yZjFn.js" as="script"><link rel="prefetch" href="/assets/Gitè¿›é˜¶ä¹‹ä»£ç å›æ»šã€åˆå¹¶ä»£ç ã€ä»Aåˆ†æ”¯é€‰æ‹©Næ¬¡æäº¤ï¼Œåˆå¹¶åˆ°Båˆ†æ”¯ã€revertã€mergeã€rebaseã€cherry-pickã€‘.html-BVn3m8Ak.js" as="script"><link rel="prefetch" href="/assets/index.html-B1Tg8der.js" as="script"><link rel="prefetch" href="/assets/index.html-BmYcSFeY.js" as="script"><link rel="prefetch" href="/assets/index.html-DObAQoU2.js" as="script"><link rel="prefetch" href="/assets/index.html-D8bF06Eo.js" as="script"><link rel="prefetch" href="/assets/å…è´¹ç®€å•å¥½ç”¨çš„å†…ç½‘ç©¿é€å·¥å…·ï¼ˆngrokã€natappï¼‰ï¼Œå¾®ä¿¡å›è°ƒåœ°å€é…ç½®.html-B_A-XWlY.js" as="script"><link rel="prefetch" href="/assets/EasyExcelå¯¼å‡ºæ¨¡æ¿å®ç°ä¸‹æ‹‰é€‰ï¼ˆè§£å†³ä¸‹æ‹‰è¶…è¿‡50ä¸ªé™åˆ¶ï¼‰.html-BBTu-wAq.js" as="script"><link rel="prefetch" href="/assets/404.html-BY4dHwxt.js" as="script"><link rel="prefetch" href="/assets/index.html-BIYzE_HA.js" as="script"><link rel="prefetch" href="/assets/index.html-C6BMxnbv.js" as="script"><link rel="prefetch" href="/assets/index.html-BfOArDOW.js" as="script"><link rel="prefetch" href="/assets/index.html-Bre696tz.js" as="script"><link rel="prefetch" href="/assets/index.html-tWnDHepK.js" as="script"><link rel="prefetch" href="/assets/index.html-CeVoC7wZ.js" as="script"><link rel="prefetch" href="/assets/index.html-IR1RmLJe.js" as="script"><link rel="prefetch" href="/assets/index.html-D4otpBSI.js" as="script"><link rel="prefetch" href="/assets/index.html-BKOqGcZp.js" as="script"><link rel="prefetch" href="/assets/index.html-k0tBOlkz.js" as="script"><link rel="prefetch" href="/assets/index.html-B90Wo6A1.js" as="script"><link rel="prefetch" href="/assets/index.html-aKN69llQ.js" as="script"><link rel="prefetch" href="/assets/index.html-Be1Ce5Du.js" as="script"><link rel="prefetch" href="/assets/index.html-BdvRhXMV.js" as="script"><link rel="prefetch" href="/assets/index.html-2GEuH-GF.js" as="script"><link rel="prefetch" href="/assets/index.html-DoeQwSkn.js" as="script"><link rel="prefetch" href="/assets/index.html-C5QcbxZR.js" as="script"><link rel="prefetch" href="/assets/index.html-fWLjStAp.js" as="script"><link rel="prefetch" href="/assets/index.html-B1L4LUs7.js" as="script"><link rel="prefetch" href="/assets/index.html-Dfj2XHhA.js" as="script"><link rel="prefetch" href="/assets/index.html-HtNltuCy.js" as="script"><link rel="prefetch" href="/assets/index.html-DUCz9ufV.js" as="script"><link rel="prefetch" href="/assets/index.html-BP18um5E.js" as="script"><link rel="prefetch" href="/assets/index.html-DjnU2pqt.js" as="script"><link rel="prefetch" href="/assets/index.html-D1H1rqKJ.js" as="script"><link rel="prefetch" href="/assets/index.html-Dg48_Ht4.js" as="script"><link rel="prefetch" href="/assets/index.html-LdK5A-h-.js" as="script"><link rel="prefetch" href="/assets/index.html-CoBLMrAB.js" as="script"><link rel="prefetch" href="/assets/index.html-CmagVK9s.js" as="script"><link rel="prefetch" href="/assets/index.html-BAaw_1eR.js" as="script"><link rel="prefetch" href="/assets/index.html-C_44b9gQ.js" as="script"><link rel="prefetch" href="/assets/index.html-71BInEaD.js" as="script"><link rel="prefetch" href="/assets/index.html-CH_BVz4a.js" as="script"><link rel="prefetch" href="/assets/index.html-BtCPMz02.js" as="script"><link rel="prefetch" href="/assets/index.html-BEN28jZ2.js" as="script"><link rel="prefetch" href="/assets/index.html-T8pTRecA.js" as="script"><link rel="prefetch" href="/assets/index.html-BqcEPgKb.js" as="script"><link rel="prefetch" href="/assets/index.html-GiYW3TbK.js" as="script"><link rel="prefetch" href="/assets/index.html-c3n9GdCS.js" as="script"><link rel="prefetch" href="/assets/index.html-DdhXl2Ra.js" as="script"><link rel="prefetch" href="/assets/index.html-DgTK79w9.js" as="script"><link rel="prefetch" href="/assets/index.html-BfH5trpF.js" as="script"><link rel="prefetch" href="/assets/index.html-DPJ2Cx1F.js" as="script"><link rel="prefetch" href="/assets/index.html-e20j-05R.js" as="script"><link rel="prefetch" href="/assets/index.html-TiWQ_HNz.js" as="script"><link rel="prefetch" href="/assets/index.html-MxyUWgNY.js" as="script"><link rel="prefetch" href="/assets/index.html-Bta60JHq.js" as="script"><link rel="prefetch" href="/assets/index.html-gMg10SVB.js" as="script"><link rel="prefetch" href="/assets/index.html-DWocySiO.js" as="script"><link rel="prefetch" href="/assets/index.html-B7kL5kg1.js" as="script"><link rel="prefetch" href="/assets/index.html-DfShGw1b.js" as="script"><link rel="prefetch" href="/assets/index.html-D6qna9wA.js" as="script"><link rel="prefetch" href="/assets/index.html-D5tEkVIz.js" as="script"><link rel="prefetch" href="/assets/index.html-BG5NUuK4.js" as="script"><link rel="prefetch" href="/assets/index.html-BsTKV7Cc.js" as="script"><link rel="prefetch" href="/assets/index.html-Cc0auejo.js" as="script"><link rel="prefetch" href="/assets/index.html-BnjO4LLG.js" as="script"><link rel="prefetch" href="/assets/index.html-NBlP50Oo.js" as="script"><link rel="prefetch" href="/assets/index.html-Dcuo4Mvc.js" as="script"><link rel="prefetch" href="/assets/index.html-DGpsLuzN.js" as="script"><link rel="prefetch" href="/assets/index.html-CwaotB_S.js" as="script"><link rel="prefetch" href="/assets/index.html-BuKYw9GO.js" as="script"><link rel="prefetch" href="/assets/index.html-DSsAFKVn.js" as="script"><link rel="prefetch" href="/assets/index.html-B02ZIqqB.js" as="script"><link rel="prefetch" href="/assets/index.html-l0xUn1Qt.js" as="script"><link rel="prefetch" href="/assets/index.html-CWQOVPJ_.js" as="script"><link rel="prefetch" href="/assets/index.html-Cql2bEq0.js" as="script"><link rel="prefetch" href="/assets/index.html-D7Tn0mV2.js" as="script"><link rel="prefetch" href="/assets/index.html-Ck46PxdW.js" as="script"><link rel="prefetch" href="/assets/index.html-0mRcTMgy.js" as="script"><link rel="prefetch" href="/assets/index.html-BJy-yXpp.js" as="script"><link rel="prefetch" href="/assets/index.html-BbDUnc7v.js" as="script"><link rel="prefetch" href="/assets/index.html-BkayRsKe.js" as="script"><link rel="prefetch" href="/assets/index.html-SZP3WIne.js" as="script"><link rel="prefetch" href="/assets/index.html-DlFzgsGe.js" as="script"><link rel="prefetch" href="/assets/index.html-BYFl8eAO.js" as="script"><link rel="prefetch" href="/assets/index.html-Bpyuxs5H.js" as="script"><link rel="prefetch" href="/assets/index.html-C6hyRdnU.js" as="script"><link rel="prefetch" href="/assets/index.html-Cp2CI7u4.js" as="script"><link rel="prefetch" href="/assets/index.html-DAEn0ea_.js" as="script"><link rel="prefetch" href="/assets/index.html-D7o8hOME.js" as="script"><link rel="prefetch" href="/assets/index.html-Bw0EpdkG.js" as="script"><link rel="prefetch" href="/assets/index.html-CN68LIrU.js" as="script"><link rel="prefetch" href="/assets/index.html-BlwloNGC.js" as="script"><link rel="prefetch" href="/assets/index.html-CbCaeY5b.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/./logo.svg" alt><!----><span class="vp-site-name hide-in-pad">å°é“ä»™Javaç¬”è®°</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/01Java/" aria-label="å¼€å§‹"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="lightbulb" width="1em" height="1em"></iconify-icon><!--]-->å¼€å§‹<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/portfolio.html" aria-label="æ¡£æ¡ˆä¸»é¡µGO"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="home" width="1em" height="1em"></iconify-icon><!--]-->æ¡£æ¡ˆä¸»é¡µGO<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/timeline/" aria-label="æ—¶é—´è½´"><!---->æ—¶é—´è½´<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><!----><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="hugeicons:java" width="1em" height="1em"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/01Java/" aria-label="Java"><!---->Java<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="simple-icons:spring" width="1em" height="1em"></iconify-icon><a class="route-link route-link-active auto-link vp-sidebar-title no-external-link-icon" href="/02SSM/" aria-label="SSM"><!---->SSM<!----></a><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">1:Spring</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/02SSM/01Spring/Java%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%EF%BC%8C@ControllerAdvice%E5%BC%82%E5%B8%B8%E6%8B%A6%E6%88%AA%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90%E3%80%90%E7%AE%80%E5%8D%95%E6%98%93%E6%87%82%E3%80%91.html" aria-label="ã€ä¸­ã€‘@ControllerAdviceå¼‚å¸¸æ‹¦æˆªåŸç†è§£æ"><!---->ã€ä¸­ã€‘@ControllerAdviceå¼‚å¸¸æ‹¦æˆªåŸç†è§£æ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/02SSM/01Spring/Spring%E4%BD%BF%E7%94%A8@Transactional%20%E7%AE%A1%E7%90%86%E4%BA%8B%E5%8A%A1%EF%BC%8CJava%E4%BA%8B%E5%8A%A1%E8%AF%A6%E8%A7%A3.html" aria-label="ã€ä¸­ã€‘@Transactional ç®¡ç†äº‹ç‰©ï¼ŒJavaäº‹ç‰©è¯¦è§£"><!---->ã€ä¸­ã€‘@Transactional ç®¡ç†äº‹ç‰©ï¼ŒJavaäº‹ç‰©è¯¦è§£<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/02SSM/01Spring/SpringBoot%20%E7%83%AD%E6%8F%92%E6%8B%94AOP%EF%BC%8C%E5%8A%A8%E6%80%81%E7%9A%84%E5%AE%9E%E7%8E%B0AOP%E3%80%90%E7%AE%80%E5%8D%95%E6%98%93%E6%87%82%EF%BC%8C%E6%9C%89%E5%A4%A7%E7%94%A8%E3%80%91.html" aria-label="ã€ä¸­ã€‘åŠ¨æ€çš„å®ç°AOP"><!---->ã€ä¸­ã€‘åŠ¨æ€çš„å®ç°AOP<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/02SSM/01Spring/%E4%B8%80%E6%96%87%E5%BC%84%E6%87%82@Async%E4%BB%A3%E7%90%86%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86%EF%BC%88%E4%BB%8E%E6%BA%90%E7%A0%81%E7%9A%84%E8%A7%92%E5%BA%A6%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3@EnableAsync%20%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%90%AF%E5%8E%9F%E7%90%86%EF%BC%89.html" aria-label="ã€ä¸­ã€‘ä¸€æ–‡å¼„æ‡‚@Asyncä»£ç†æ‰§è¡ŒåŸç†"><!---->ã€ä¸­ã€‘ä¸€æ–‡å¼„æ‡‚@Asyncä»£ç†æ‰§è¡ŒåŸç†<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/02SSM/01Spring/Spring%E4%BA%8B%E5%8A%A1%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E3%80%90%E4%B8%80%E6%AC%A1%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0%E5%BC%84%E6%87%82%E3%80%91.html" aria-label="ã€ä¸­ã€‘Springäº‹åŠ¡æºç è§£æ"><!---->ã€ä¸­ã€‘Springäº‹åŠ¡æºç è§£æ<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">2:SpringBoot</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">3:SpringMVC</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">4:MyBatis/MyBatis-Plus</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="teenyicons:database-outline" width="1em" height="1em"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/03%E6%95%B0%E6%8D%AE%E5%BA%93/" aria-label="æ•°æ®åº“"><!---->æ•°æ®åº“<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="simple-icons:apacherocketmq" width="1em" height="1em"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/05%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" aria-label="æ¶ˆæ¯é˜Ÿåˆ—"><!---->æ¶ˆæ¯é˜Ÿåˆ—<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="carbon:microservices-2" width="1em" height="1em"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/06%E5%BE%AE%E6%9C%8D%E5%8A%A1/" aria-label="å¾®æœåŠ¡"><!---->å¾®æœåŠ¡<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="arcticons:fdroid-nearby" width="1em" height="1em"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/07Java%E5%91%A8%E8%BE%B9/" aria-label="Javaå‘¨è¾¹"><!---->Javaå‘¨è¾¹<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/08%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/" aria-label="æºç å­¦ä¹ "><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="hugeicons:source-code" width="1em" height="1em"></iconify-icon><!--]-->æºç å­¦ä¹ <!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="carbon:character-patterns" width="1em" height="1em"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/10%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" aria-label="è®¾è®¡æ¨¡å¼"><!---->è®¾è®¡æ¨¡å¼<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:think-outline" width="1em" height="1em"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/12%E5%B8%B8%E8%A7%81%E7%AE%97%E6%B3%95/" aria-label="å¸¸è§ç®—æ³•"><!---->å¸¸è§ç®—æ³•<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="teenyicons:depth-chart-outline" width="1em" height="1em"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/15JVM/" aria-label="JVM"><!---->JVM<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="teenyicons:docker-outline" width="1em" height="1em"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/18docker-compose/" aria-label="docker-compose"><!---->docker-compose<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="cbi:scene-concentrate" width="1em" height="1em"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/19%E5%9C%BA%E6%99%AF%E9%A2%98/" aria-label="åœºæ™¯é¢˜"><!---->åœºæ™¯é¢˜<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="basil:other-1-outline" width="1em" height="1em"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/20æ‚é¡¹/" aria-label="æ‚é¡¹"><!---->æ‚é¡¹<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="ant-design:exception-outlined" width="1em" height="1em"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/25å¼‚å¸¸é›†åˆ/" aria-label="å¼‚å¸¸é›†åˆ"><!---->å¼‚å¸¸é›†åˆ<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="arcticons:nicefeed" width="1em" height="1em"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/25%E5%86%99%E4%B8%AA%E6%BC%82%E4%BA%AE%E7%9A%84%E4%BB%A3%E7%A0%81/" aria-label="å†™ä¸ªæ¼‚äº®çš„ä»£ç "><!---->å†™ä¸ªæ¼‚äº®çš„ä»£ç <!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="system-uicons:expand" width="1em" height="1em"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/30%E6%89%A9%E5%B1%95%E5%AD%A6%E4%B9%A0/" aria-label="æ‰©å±•å­¦ä¹ "><!---->æ‰©å±•å­¦ä¹ <!----></a><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->ã€ä¸­ã€‘SpringBoot çƒ­æ’æ‹”AOPï¼ŒåŠ¨æ€çš„å®ç°AOPã€ç®€å•æ˜“æ‡‚ï¼Œæœ‰å¤§ç”¨ã€‘</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://java.xdx97.com" target="_blank" rel="noopener noreferrer">å°é“ä»™97</a></span><span property="author" content="å°é“ä»™97"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-05-25T17:23:37.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 6 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT6M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color0 clickable" role="navigation">ä¸­çº§</span><span class="page-category-item color0 clickable" role="navigation">è§†é¢‘è®²è§£</span><!--]--><meta property="articleSection" content="ä¸­çº§,è§†é¢‘è®²è§£"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color3 clickable" role="navigation">AOP</span><span class="page-tag-item color2 clickable" role="navigation">åŠ¨æ€ä»£ç†</span><span class="page-tag-item color8 clickable" role="navigation">çƒ­æ’æ‹”AOP</span><!--]--><meta property="keywords" content="AOP,åŠ¨æ€ä»£ç†,çƒ­æ’æ‹”AOP"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<!----><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-1ã€è‡ªå®šä¹‰æ“ä½œç±»å‹æšä¸¾">2-1ã€è‡ªå®šä¹‰æ“ä½œç±»å‹æšä¸¾</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-2ã€è‡ªå®šä¹‰-advisor">2-2ã€è‡ªå®šä¹‰ Advisor</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-3ã€åŠ¨æ€æ·»åŠ -åˆ é™¤advisor-å·¥å…·ç±»">2-3ã€åŠ¨æ€æ·»åŠ /åˆ é™¤advisor å·¥å…·ç±»</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-4ã€æä¾›æµ‹è¯•çš„-controller">2-4ã€æä¾›æµ‹è¯•çš„ Controller</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-1ã€è‡ªå®šä¹‰æ³¨è§£">3-1ã€è‡ªå®šä¹‰æ³¨è§£</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-2ã€è‡ªå®šä¹‰æ‹¦æˆªå™¨">3-2ã€è‡ªå®šä¹‰æ‹¦æˆªå™¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-3ã€æµ‹è¯•">3-3ã€æµ‹è¯•</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><p><a href="https://www.bilibili.com/video/BV1WZ421W7Qx" target="_blank" rel="noopener noreferrer">Bç«™å­¦ä¹ åœ°å€</a></p><br><br><blockquote><p>å‰æ®µæ—¶é—´åœ¨å­¦ä¹ sentinelå’Œdubboçš„æ—¶å€™ï¼Œå¾ˆå¥½å¥‡å®ƒä»¬å¯¹åº”çš„æ§åˆ¶å°ä¸ºä½•å¯ä»¥å®ç°ä»£ç æ— ä¾µå…¥ åŠ¨æ€çš„æ·»åŠ /åˆ é™¤åŠŸèƒ½ <br> çœ‹è¿‡ @Asyncã€@Transactionnalç›¸å…³æºç çš„æœ‹å‹åº”è¯¥çŸ¥é“ï¼Œè¿™æ˜¯åŸºäºåŠ¨æ€ä»£ç†å»å®ç°äº†ï¼Œæ—¢ç„¶å¦‚æ­¤é‚£æˆ‘ä»¬æ˜¯å¦å¯ä»¥å®ç°åŠ¨æ€çš„å»æ·»åŠ /åˆ é™¤åŠ¨æ€ä»£ç†å‘¢ <br><strong>ç­”æ¡ˆæ˜¯ YESï¼Œä¸‹é¢å°±æ¥å®ç°ä¸€ä¸ªåŠ¨æ€çš„æ·»åŠ /åˆ é™¤åŠ¨æ€ä»£ç†çš„åŠŸèƒ½ï¼Œå®ƒçš„æºç å¾ˆç®€å•ï¼Œä½†è¿™ä¼šæ‰“å¼€ä½ çš„æ–°ä¸–ç•Œ</strong></p></blockquote><br><blockquote><p>åŠ¨æ€ä»£ç†åä½ æƒ³å¹²å˜›éƒ½è¡Œï¼Œå¹²ä»€ä¹ˆä¸æ˜¯è¿™é‡Œçš„é‡ç‚¹ï¼Œé‡ç‚¹æ˜¯æ§åˆ¶å®ƒå¹²å’Œä¸å¹²ï¼Œæ‰€ä»¥ä¸ºäº†ç®€å•çš„æˆ‘å°±åœ¨è¿”å›å€¼ä¸Šåšäº†ç‚¹æ–‡ç« </p></blockquote><br><p><strong>å…ˆæ¥çœ‹æ•ˆæœå›¾</strong></p><p>[video(video-EPWnJGEG-1716627178943)(type-csdn)(url-https://live.csdn.net/v/embed/392505)(image-https://img-blog.csdnimg.cn/img_convert/51e2ea0940ef9344346d05ad2654968f.jpeg)(title-SpringBoot çƒ­æ’æ‹”AOPï¼ŒåŠ¨æ€çš„å®ç°AOP)]</p><br><h1 id="ä¸€ã€ç†è®º" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€ç†è®º"><span>ä¸€ã€ç†è®º</span></a></h1><br><p><strong>åœ¨å¼€å§‹å†™ä»£ç ä¹‹å‰ï¼Œå…ˆæ¥äº†è§£å‡ ä¸ªåŸºæœ¬çš„ç†è®ºçŸ¥è¯† <!---->ï¼‰</strong></p><table><thead><tr><th>key</th><th style="text-align:left;">value</th></tr></thead><tbody><tr><td>advice</td><td style="text-align:left;">åŠ¨æ€ä»£ç†ä¹‹åè¦å¹²ä»€ä¹ˆï¼Œå…¶å®å°±æ˜¯è¿™ä¸ª adviceçš„å®šä¹‰ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ Interceptorï¼ˆå®é™…ä¸Šä¹Ÿæ˜¯ï¼Œå› ä¸ºInterceptor ç»§æ‰¿äº† adviceï¼‰</td></tr><tr><td>pointcut</td><td style="text-align:left;">ä¸å¯èƒ½å¯¹æ‰€æœ‰çš„æ–¹æ³•éƒ½å¼ºåŠ ä¸Š adviceï¼ˆå¯ä»¥ä½†æ²¡å¿…è¦ï¼‰ï¼Œæ‰€ä»¥ pointcut å°±æ˜¯å®šä¹‰æ‹¦æˆªçš„è§„åˆ™ï¼ˆå¯ä»¥å¯¹ä½¿ç”¨äº†æŸä¸ªæ³¨è§£è¿›è¡Œæ‹¦æˆªï¼Œä¹Ÿå¯ä»¥ç”¨è¡¨è¾¾å¼å»åŒ¹é…ï¼‰</td></tr><tr><td>advisor</td><td style="text-align:left;">ç®€å•ç†è§£ä¸º å®ƒå°±æ˜¯åŒ…å«äº†advice å’Œ pointcut çš„ç±»</td></tr><tr><td>advised</td><td style="text-align:left;">ä»£ç†åç”Ÿæˆçš„ä»£ç†å¯¹è±¡ï¼Œå®ƒç»´æŠ¤äº†ä¸€ä¸ª <code>List&lt;Advisor&gt; advisors</code>ï¼Œä»è€Œå®ç°åŠŸèƒ½å åŠ </td></tr></tbody></table><br><p><strong><!----> <!----></strong></p><br><blockquote><p>ä¹Ÿå¯ä»¥æ·»åŠ /åˆ é™¤ adviceï¼Œä½†è¿™å°±å¯¹beançš„æ‰€æœ‰æ–¹æ³•éƒ½ä»£ç†äº†ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦äº†ï¼Œæ¯”å¦‚ @Async æ˜¯æƒ³æ·»åŠ åœ¨å“ªä¸ªæ–¹æ³•ä¸Šï¼Œå“ªä¸ªæ–¹æ³•å°±å¼‚æ­¥ï¼Œè€Œä¸æ˜¯å…¨éƒ¨çš„æ–¹æ³•éƒ½å¼‚æ­¥</p></blockquote><br><p>advisorï¼Œadvice è¿™ä¿©ç©æ„ä¸ç†Ÿæ‚‰çš„æ—¶å€™ï¼Œå¾ˆå®¹æ˜“çœ‹é”™ï¼Œæˆ‘å¼€å§‹å°±æ˜¯ï¼Œæ’æŸ¥åŠå¤©</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">advised</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">addAdvisor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">advised</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">addAdvice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><br><h1 id="äºŒã€æ ¸å¿ƒä»£ç " tabindex="-1"><a class="header-anchor" href="#äºŒã€æ ¸å¿ƒä»£ç "><span>äºŒã€æ ¸å¿ƒä»£ç </span></a></h1><br><h2 id="_2-1ã€è‡ªå®šä¹‰æ“ä½œç±»å‹æšä¸¾" tabindex="-1"><a class="header-anchor" href="#_2-1ã€è‡ªå®šä¹‰æ“ä½œç±»å‹æšä¸¾"><span>2-1ã€è‡ªå®šä¹‰æ“ä½œç±»å‹æšä¸¾</span></a></h2><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> enum</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> OperateEventEnum</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    ADD</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;add&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">    DELETE</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;delete&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    OperateEventEnum</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> value;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> value;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h2 id="_2-2ã€è‡ªå®šä¹‰-advisor" tabindex="-1"><a class="header-anchor" href="#_2-2ã€è‡ªå®šä¹‰-advisor"><span>2-2ã€è‡ªå®šä¹‰ Advisor</span></a></h2><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.aopalliance.aop.Advice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.aopalliance.intercept.MethodInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.aop.Pointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.aop.aspectj.AspectJExpressionPointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.aop.support.AbstractPointcutAdvisor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.aop.support.ComposablePointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.aop.support.annotation.AnnotationMatchingPointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> java.lang.annotation.Annotation</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> java.util.Iterator</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> java.util.LinkedHashSet</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> java.util.Set</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> XdxAdvisor</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> AbstractPointcutAdvisor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Advice</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> advice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Pointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> pointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // åŸºäºæ³¨è§£çš„ pointcut</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> XdxAdvisor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> Annotation</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;  </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">annotationClass</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">MethodInterceptor</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> interceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">advice</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> interceptor;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">pointcut</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> buildPointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(annotationClass);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // åŸºäºè¡¨è¾¾å¼çš„ pointcut</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> XdxAdvisor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> expression</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">MethodInterceptor</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> interceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">advice</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> interceptor;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">pointcut</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> buildPointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(expression);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     * ç›´æ¥å¤åˆ¶çš„ @Async æ„å»º pointcutçš„ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> annotationType</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">@return</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Pointcut</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> buildPointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> Annotation</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">annotationType</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        Set</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> Annotation</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;&gt; </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">annotationTypes</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> LinkedHashSet</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        annotationTypes</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(annotationType);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        ComposablePointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        AnnotationMatchingPointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> mpc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Iterator</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> var3</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> annotationTypes</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">iterator</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(); </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">var3</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">hasNext</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(); result </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> result</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">union</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(mpc)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            Class</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> Annotation</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">asyncAnnotationType</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (Class)</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">var3</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            Pointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> cpc</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> AnnotationMatchingPointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(asyncAnnotationType, </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            mpc </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> AnnotationMatchingPointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((Class)</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, asyncAnnotationType, </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (result </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                result </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> ComposablePointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(cpc);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                result</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">union</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(cpc);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (Pointcut) (result </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> ?</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Pointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">TRUE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Pointcut</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> buildPointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> expression</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        AspectJExpressionPointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> tmpPointcut</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> AspectJExpressionPointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        tmpPointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">setExpression</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(expression);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  tmpPointcut;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Pointcut</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> getPointcut</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> pointcut;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Advice</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> getAdvice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> advice;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//    private Pointcut buildPointcut(Class&lt;? extends Annotation&gt; annotationTypes) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//        AnnotationClassFilter classFilter = new AnnotationClassFilter(annotationTypes, true);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//        return new ComposablePointcut(classFilter);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h2 id="_2-3ã€åŠ¨æ€æ·»åŠ -åˆ é™¤advisor-å·¥å…·ç±»" tabindex="-1"><a class="header-anchor" href="#_2-3ã€åŠ¨æ€æ·»åŠ -åˆ é™¤advisor-å·¥å…·ç±»"><span>2-3ã€åŠ¨æ€æ·»åŠ /åˆ é™¤advisor å·¥å…·ç±»</span></a></h2><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.aop.Advisor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.aop.framework.Advised</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.aop.framework.ProxyFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.aop.framework.ProxyProcessorSupport</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.aop.support.AopUtils</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.beans.BeansException</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.beans.factory.BeanFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.beans.factory.BeanFactoryAware</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.beans.factory.support.DefaultListableBeanFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.context.annotation.Configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> DynamicProxy</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> ProxyProcessorSupport</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> BeanFactoryAware</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> DefaultListableBeanFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> beanFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> operateAdvisor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">XdxAdvisor</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> advisor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">OperateEventEnum</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> operateEventEnum</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // å¾ªç¯æ¯ä¸€ä¸ªbean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> beanDefinitionName</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> beanFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getBeanDefinitionNames</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> bean</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> beanFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getBean</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(beanDefinitionName);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">            // åˆ¤æ–­å½“å‰beanæ˜¯å¦åŒ¹é…</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">isEligible</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(bean, advisor)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                continue</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">            // åˆ¤æ–­å½“å‰beanæ˜¯ä¸æ˜¯å·²ç»æ˜¯ä»£ç†å¯¹è±¡äº†ï¼Œæ˜¯å°±ç›´æ¥è¿›è¡Œ Advisor æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (bean </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">instanceof</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> Advised) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                Advised</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> advised</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (Advised) bean;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(operateEventEnum </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> OperateEventEnum</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DELETE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                    advised</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">removeAdvisor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(advisor);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                }</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(operateEventEnum </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> OperateEventEnum</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">ADD</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                    advised</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">addAdvisor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(advisor);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                continue</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">            // ç”Ÿæˆ Advisor çš„ä»£ç†å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            ProxyFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> proxyFactory</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> ProxyFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            proxyFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">addAdvisor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(advisor);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            proxyFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">setTarget</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(bean);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            ClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> classLoader</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getProxyClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> proxy</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> proxyFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getProxy</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(classLoader);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">            // é”€æ¯ä¹‹å‰çš„beanï¼ŒæŠŠæ–°çš„beanæ³¨å…¥åˆ°å®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            beanFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">destroySingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(beanDefinitionName);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            beanFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">registerSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(beanDefinitionName, proxy);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> setBeanFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">BeanFactory</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> beanFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> BeansException</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">beanFactory</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (DefaultListableBeanFactory) beanFactory;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     * å¤åˆ¶çš„ @Async çš„åŒ¹é…é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> isEligible</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> bean</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Advisor</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> advisor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> AopUtils</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">canApply</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(advisor, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">bean</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><blockquote><ol><li>æ·»åŠ çš„æ—¶å€™å…¶å®å¯ä»¥æŒ‡å®šä½ç½®çš„ï¼Œå¦‚æœæœ‰éœ€è¦çš„è¯ï¼Œæœ¬èº«å­˜å‚¨çš„å°±æ˜¯Listæœ‰åºçš„</li><li>@Asyncæ¯æ¬¡æ·»åŠ çš„æ—¶å€™ pos = 0 ï¼Œå› ä¸ºå¼‚æ­¥è¦å…ˆå¼€å¯å‘€</li></ol></blockquote><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> addAdvisor</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> pos</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Advisor</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> advisor) throws AopConfigException</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> addAdvice</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> pos</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Advice</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> advice) throws AopConfigException</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h2 id="_2-4ã€æä¾›æµ‹è¯•çš„-controller" tabindex="-1"><a class="header-anchor" href="#_2-4ã€æä¾›æµ‹è¯•çš„-controller"><span>2-4ã€æä¾›æµ‹è¯•çš„ Controller</span></a></h2><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> cn.hutool.core.text.CharSequenceUtil</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> com.xdx97.cli.dynamic.DynamicProxy</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> com.xdx97.cli.dynamic.OperateEventEnum</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> com.xdx97.cli.dynamic.XdxAdvisor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> com.xdx97.cli.dynamic.annotation.XdxAnnotation</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.aopalliance.intercept.MethodInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.web.bind.annotation.GetMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.web.bind.annotation.RequestMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.web.bind.annotation.RestController</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> javax.annotation.Resource</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> java.lang.annotation.Annotation</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> java.util.HashMap</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> java.util.Map</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">RestController</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">RequestMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/advisor&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> AdvisorController</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> DynamicProxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> dynamicProxy</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> XdxAdvisor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> xdxAdvisorMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;/add&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> add</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> interceptorClass</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> expression</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> annotationClass</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">CharSequenceUtil</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">isAllBlank</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(expression, annotationClass) </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> CharSequenceUtil</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">isBlank</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(interceptorClass)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;the parameter is abnormal&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">xdxAdvisorMap</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">containsKey</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(interceptorClass </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> annotationClass) </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> xdxAdvisorMap</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">containsKey</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(interceptorClass </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> expression)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;advisor already exists&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        MethodInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> methodInterceptor</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  (MethodInterceptor) </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">forName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(interceptorClass).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getDeclaredConstructor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">newInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        XdxAdvisor</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> xdxAdvisor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // ä»¥æ³¨è§£ä¸ºä¸»ï¼Œæœ‰æ³¨è§£å°±ç”¨æ³¨è§£</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">CharSequenceUtil</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">isNotBlank</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(annotationClass)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            Class</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> Annotation</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">aClass</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> extends Annotation</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">forName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(annotationClass);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            xdxAdvisor </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> XdxAdvisor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(aClass, methodInterceptor);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            xdxAdvisorMap</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(interceptorClass </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> annotationClass, xdxAdvisor);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            xdxAdvisor </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> XdxAdvisor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(expression, methodInterceptor);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            xdxAdvisorMap</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(interceptorClass </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> expression, xdxAdvisor);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        dynamicProxy</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">operateAdvisor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(xdxAdvisor, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">OperateEventEnum</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">ADD</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;advisor add success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;/delete&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> delete</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> interceptorClass</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> expression</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> annotationClass</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">CharSequenceUtil</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">isAllBlank</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(expression, annotationClass) </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> CharSequenceUtil</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">isBlank</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(interceptorClass)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> IllegalArgumentException</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;å‚æ•°å¼‚å¸¸&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">xdxAdvisorMap</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">containsKey</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(interceptorClass </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> annotationClass) </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">xdxAdvisorMap</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">containsKey</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(interceptorClass </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> expression)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;advisor not exists&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // ä»¥æ³¨è§£ä¸ºä¸»ï¼Œæœ‰æ³¨è§£å°±ç”¨æ³¨è§£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        StringBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> advisorKey</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> StringBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(interceptorClass);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">CharSequenceUtil</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">isNotBlank</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(annotationClass)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            advisorKey</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(annotationClass);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            advisorKey</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(expression);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        XdxAdvisor</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> xdxAdvisor</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> xdxAdvisorMap</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">advisorKey</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        dynamicProxy</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">operateAdvisor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(xdxAdvisor, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">OperateEventEnum</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DELETE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        xdxAdvisorMap</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">advisorKey</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;advisor delete success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     * ç”¨æ¥æµ‹è¯•æ•ˆæœçš„fun</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">@return</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;/fun&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">XdxAnnotation</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> fun</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;my fun&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h1 id="ä¸‰ã€æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€æµ‹è¯•"><span>ä¸‰ã€æµ‹è¯•</span></a></h1><br><p>ä¸Šé¢çš„ä»£ç å°±å·²ç»å®Œæˆäº†åŠ¨æ€çš„åŠ¨æ€ä»£ç†ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿæˆ–è®¸ä½ ç°åœ¨è¿˜æœ‰ç‚¹æ‡µï¼Œåˆ«æ‹…å¿ƒä¸‹é¢çš„æµ‹è¯•ï¼Œä¼šè®©ä½ è„‰åŠ¨å›æ¥</p><p>è¦å®ç°ä¸¤ç§åŠ¨æ€ä»£ç†</p><ol><li>åŸºäºè¡¨è¾¾å¼ï¼Œï¼ˆä¸ä¼šå†™è¡¨è¾¾å¼ï¼Ÿæ²¡å…³ç³»ï¼ŒAIåŠ©ä½ ï¼‰</li><li>åŸºäºæ³¨è§£çš„</li></ol><br><h2 id="_3-1ã€è‡ªå®šä¹‰æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#_3-1ã€è‡ªå®šä¹‰æ³¨è§£"><span>3-1ã€è‡ªå®šä¹‰æ³¨è§£</span></a></h2><p>ç»†å¿ƒçš„æœ‹å‹å¯èƒ½å·²ç»å‘ç°äº†åœ¨AdvisorController.fun() æ–¹æ³•ä¸Šé¢å·²ç»æºå¸¦äº†è¿™ä¸ªæ³¨è§£</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> java.lang.annotation.</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Target</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">({</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">ElementType</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">TYPE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> ElementType</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">METHOD</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Retention</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RetentionPolicy</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RUNTIME</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">interface</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> XdxAnnotation</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><blockquote><p>è¿™ä¸ªæ³¨è§£ä¹Ÿå¯ä»¥ç”¨åœ¨ç±»ä¸Šé¢å“¦ï¼Œè¿™æ ·ä¼šæŠŠæ‰€æœ‰æ–¹æ³•éƒ½æ‹¦æˆª</p></blockquote><br><h2 id="_3-2ã€è‡ªå®šä¹‰æ‹¦æˆªå™¨" tabindex="-1"><a class="header-anchor" href="#_3-2ã€è‡ªå®šä¹‰æ‹¦æˆªå™¨"><span>3-2ã€è‡ªå®šä¹‰æ‹¦æˆªå™¨</span></a></h2><br><p>æ‹¦æˆªåˆ°ä¹‹åæ€»å¾—å¹²ç‚¹ä»€ä¹ˆï¼Œè¿™é‡Œæˆ‘åœ¨è¿”å›å€¼ä¸Šåšæ–‡ç« ï¼Œå› ä¸ºè¿™æ ·æµ‹è¯•çš„æ—¶å€™æ•ˆæœæœ€æ˜¾è‘—äº†</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.aopalliance.intercept.MethodInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.aopalliance.intercept.MethodInvocation</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> OneInterceptor</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> MethodInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">MethodInvocation</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> invocation</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Throwable</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> invocation</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">proceed</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot; å¢å¼ºOne&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> TwoInterceptor</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> MethodInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">MethodInvocation</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> invocation</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Throwable</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> invocation</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">proceed</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot; å¢å¼ºTwo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><blockquote><p>å®šä¹‰2ä¸ªæ‹¦æˆªå™¨ï¼Œæ˜¯ä¸ºäº†ä¸€ä¸ªç»™æ³¨è§£æ‹¦æˆªç”¨ï¼Œä¸€ä¸ªç»™è¡¨è¾¾å¼æ‹¦æˆªç”¨ï¼Œæ–¹ä¾¿è§‚å¯Ÿ</p></blockquote><br><h2 id="_3-3ã€æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_3-3ã€æµ‹è¯•"><span>3-3ã€æµ‹è¯•</span></a></h2><br><p><strong>æŸ¥çœ‹ä»£ç†ç»“æœ</strong></p><div class="language-curl line-numbers-mode" data-highlighter="shiki" data-ext="curl" data-title="curl" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>curl --location --request GET &#39;http://127.0.0.1:9897/advisor/fun&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><br><p><strong>æ·»åŠ æ³¨è§£çš„ä»£ç†</strong></p><div class="language-curl line-numbers-mode" data-highlighter="shiki" data-ext="curl" data-title="curl" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>curl --location --request GET &#39;http://127.0.0.1:9897/advisor/add?interceptorClass=com.xdx97.cli.dynamic.inteceptor.OneInterceptor&amp;annotationClass=com.xdx97.cli.dynamic.annotation.XdxAnnotation&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><br><p><strong>æ·»åŠ è¡¨è¾¾å¼ä»£ç†</strong></p><div class="language-curl line-numbers-mode" data-highlighter="shiki" data-ext="curl" data-title="curl" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>curl --location --request GET &#39;http://127.0.0.1:9897/advisor/add?interceptorClass=com.xdx97.cli.dynamic.inteceptor.TwoInterceptor&amp;expression=execution(* com.xdx97.cli.AdvisorController.fun(..))&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><br><p><strong>åˆ é™¤æ³¨è§£ä»£ç†</strong></p><div class="language-curl line-numbers-mode" data-highlighter="shiki" data-ext="curl" data-title="curl" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>curl --location --request GET &#39;http://127.0.0.1:9897/advisor/delete?interceptorClass=com.xdx97.cli.dynamic.inteceptor.OneInterceptor&amp;annotationClass=com.xdx97.cli.dynamic.annotation.XdxAnnotation&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><br><p><strong>åˆ é™¤è¡¨è¾¾å¼ä»£ç†</strong></p><div class="language-curl line-numbers-mode" data-highlighter="shiki" data-ext="curl" data-title="curl" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>curl --location --request GET &#39;http://127.0.0.1:9897/advisor/delete?interceptorClass=com.xdx97.cli.dynamic.inteceptor.TwoInterceptor&amp;expression=execution(* com.xdx97.cli.AdvisorController.fun(..))&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><br><h1 id="å››ã€æºç è·å–" tabindex="-1"><a class="header-anchor" href="#å››ã€æºç è·å–"><span>å››ã€æºç è·å–</span></a></h1><br><ol><li>å…³æ³¨å…¬ä¼—å·ï¼šå°é“ä»™97</li><li>å›å¤ï¼šdynamicProxy</li></ol></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: ziyangtao@distinctclinic.com">ziyangtao</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/02SSM/01Spring/Spring%E4%BD%BF%E7%94%A8@Transactional%20%E7%AE%A1%E7%90%86%E4%BA%8B%E5%8A%A1%EF%BC%8CJava%E4%BA%8B%E5%8A%A1%E8%AF%A6%E8%A7%A3.html" aria-label="ã€ä¸­ã€‘@Transactional ç®¡ç†äº‹ç‰©ï¼ŒJavaäº‹ç‰©è¯¦è§£"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->ã€ä¸­ã€‘@Transactional ç®¡ç†äº‹ç‰©ï¼ŒJavaäº‹ç‰©è¯¦è§£</div></a><a class="route-link auto-link next" href="/02SSM/01Spring/%E4%B8%80%E6%96%87%E5%BC%84%E6%87%82@Async%E4%BB%A3%E7%90%86%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86%EF%BC%88%E4%BB%8E%E6%BA%90%E7%A0%81%E7%9A%84%E8%A7%92%E5%BA%A6%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3@EnableAsync%20%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%90%AF%E5%8E%9F%E7%90%86%EF%BC%89.html" aria-label="ã€ä¸­ã€‘ä¸€æ–‡å¼„æ‡‚@Asyncä»£ç†æ‰§è¡ŒåŸç†"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">ã€ä¸­ã€‘ä¸€æ–‡å¼„æ‡‚@Asyncä»£ç†æ‰§è¡ŒåŸç†<!----></div></a></nav><!----><!----><!--]--></main><!--]--><!----></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-mDJKuaTn.js" defer></script>
  </body>
</html>
